import{c as N,r as l,n,j as e,S as x,B as m,f as w,I as v,i as k,T as S}from"./index-C9ak4Gh3.js";const A=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],R=N("utensils",A),E=()=>{const[a,d]=l.useState([]),[t,i]=l.useState(null),[h,y]=l.useState(!0),[c,o]=l.useState("all");l.useEffect(()=>{g(),u()},[]);const g=async()=>{try{const s=await n.getAll();d(Array.isArray(s.data)?s.data:[])}catch(s){console.error("Failed to fetch notifications:",s)}finally{y(!1)}},u=async()=>{try{const s=await n.getSettings();i(s.data)}catch(s){console.error("Failed to fetch settings:",s)}},p=async s=>{try{await n.markRead(s),d((Array.isArray(a)?a:[]).map(r=>r.id===s?{...r,isRead:!0}:r))}catch(r){console.error("Failed to mark as read:",r)}},b=async()=>{try{await n.markReadAll(),d((Array.isArray(a)?a:[]).map(s=>({...s,isRead:!0})))}catch(s){console.error("Failed to mark all as read:",s)}},j=async s=>{s.preventDefault();try{await n.updateSettings(t),alert("Settings updated successfully!"),o("all")}catch(r){console.error("Failed to update settings:",r)}},f=s=>{switch(s){case"EXPIRY":return e.jsx(S,{className:"w-5 h-5 text-amber-500"});case"GROCERY":return e.jsx(k,{className:"w-5 h-5 text-blue-500"});case"MEAL":return e.jsx(R,{className:"w-5 h-5 text-emerald-500"});case"ADMIN":return e.jsx(v,{className:"w-5 h-5 text-purple-500"});default:return e.jsx(m,{className:"w-5 h-5 text-gray-500"})}};return e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Smart Notifications"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Stay updated on your food inventory and grocery Needs"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>o(c==="settings"?"all":"settings"),className:`p-2 rounded-lg border transition-colors ${c==="settings"?"bg-primary text-white border-primary":"bg-white text-gray-600 border-gray-200 hover:bg-gray-50"}`,children:e.jsx(x,{className:"w-5 h-5"})}),c==="all"&&e.jsx("button",{onClick:b,className:"text-sm font-medium text-primary hover:underline px-3 py-2",children:"Mark all as read"})]})]}),c==="settings"?e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-8",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-6 flex items-center gap-2",children:[e.jsx(x,{className:"w-6 h-6 text-primary"}),"Notification Preferences"]}),e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-800",children:"Expiry Alerts"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Get notified 7, 3, and 1 day before food expires"})]}),e.jsx("input",{type:"checkbox",className:"w-5 h-5 accent-primary",checked:t?.expiryAlerts,onChange:s=>i({...t,expiryAlerts:s.target.checked})})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-800",children:"Grocery Reminders"}),e.jsx("p",{className:"text-xs text-gray-500",children:'Alerts when your "Buy Now" list grows or stock is low'})]}),e.jsx("input",{type:"checkbox",className:"w-5 h-5 accent-primary",checked:t?.groceryReminders,onChange:s=>i({...t,groceryReminders:s.target.checked})})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-800",children:"Meal Suggestions"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Smart recipes based on ingredients you already have"})]}),e.jsx("input",{type:"checkbox",className:"w-5 h-5 accent-primary",checked:t?.mealSuggestions,onChange:s=>i({...t,mealSuggestions:s.target.checked})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Silent Hours Start"}),e.jsx("input",{type:"time",className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:border-primary",value:t?.silentHoursStart||"",onChange:s=>i({...t,silentHoursStart:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Silent Hours End"}),e.jsx("input",{type:"time",className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:border-primary",value:t?.silentHoursEnd||"",onChange:s=>i({...t,silentHoursEnd:s.target.value})})]})]}),e.jsxs("div",{className:"pt-4 flex gap-3",children:[e.jsx("button",{type:"submit",className:"flex-1 bg-primary text-white py-3 rounded-xl font-bold hover:bg-emerald-600 transition-colors shadow-lg",children:"Save Changes"}),e.jsx("button",{type:"button",onClick:()=>o("all"),className:"px-6 py-3 bg-gray-100 text-gray-600 font-bold rounded-xl hover:bg-gray-200 transition-colors",children:"Cancel"})]})]})]}):e.jsx("div",{className:"space-y-4",children:h?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 bg-white rounded-xl border border-gray-100 shadow-sm",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"}),e.jsx("p",{className:"mt-4 text-gray-500 font-medium",children:"Loading notifications..."})]}):a.length===0?e.jsxs("div",{className:"text-center py-20 bg-white rounded-xl border border-gray-100 shadow-sm",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-50 text-gray-300 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(m,{className:"w-8 h-8"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"All caught up!"}),e.jsx("p",{className:"text-gray-500 max-w-xs mx-auto mt-2",children:"No new notifications. We'll alert you when something needs your attention."})]}):e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden divide-y divide-gray-100",children:Array.isArray(a)&&a.map(s=>e.jsxs("div",{className:`p-5 flex gap-4 transition-colors ${s.isRead?"bg-white":"bg-primary/5 border-l-4 border-l-primary"}`,children:[e.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center flex-shrink-0 ${s.isRead?"bg-gray-50 text-gray-400":"bg-white shadow-sm"}`,children:f(s.type)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h4",{className:`font-bold ${s.isRead?"text-gray-700":"text-gray-900"}`,children:s.title}),e.jsx("span",{className:"text-xs text-gray-400",children:new Date(s.createdAt).toLocaleDateString()})]}),e.jsx("p",{className:`text-sm ${s.isRead?"text-gray-500":"text-gray-600"}`,children:s.message}),s.activityLink&&e.jsx("a",{href:s.activityLink,className:"inline-block mt-3 text-xs font-bold text-primary hover:underline uppercase tracking-wider",children:"View Details"})]}),!s.isRead&&e.jsx("button",{onClick:()=>p(s.id),className:"p-2 text-gray-400 hover:text-primary transition-colors self-center",title:"Mark as read",children:e.jsx(w,{className:"w-5 h-5"})})]},s.id))})})]})};export{E as default};
